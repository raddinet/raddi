TODO
====

threads are inserted duplicated (race condition?) - might've been fixed

peer addresses appear validated or are validated even though it's not possible to connect to them

hybrid (?) mode - bypass proxy for certain ports (80,443) or attempt connection both through proxy and directly

will not start connecting to core nodes if connecting to validated node on same IP (different port) as other core node

revocation code for identity: when received, all further messages by that identity are dropped
 - content code, 0xF8 plus fixed predefine block of content??
 - node support (list of revoked IIDs)

commands: loglevels
commands: optimize
commands: list:peers...
raddi.com analyze/get/list -> support decompression
raddi.com sign/verify -> file or text using identity

node operators message channel
 - ?
warrant cannary channel
 - https://en.wikipedia.org/wiki/Warrant_canary
 - example content: https://www.idrix.fr/VeraCrypt/canary.txt
general link comments channel
 - adding discussions below random internet links that might not allow one
 - unnamed topics with SHA1 of the link?
    - normal name as "title change" MOD OP
    - typically replies (automatically added) just contain EID of discussions in actual channels
       - MERGE mod OPs
    - or discussion simply follows (?)

bootstrap:dns://#port.#index.raddi.net - resolve IP through DNS (or swap port and index?)
 - 443.1.raddi.net (on port 443)
 - 44303.1.raddi.net (on port 44303)
 - method: try next 10 if some index succeeds to resolve

outbound data sorting in raddi::connection::send
 - prioritize shorter entries
 - random delay for origin masking (longer for longer messages)

report bad inputs (from source) in node

extend log so it can also output binary to named section (one for every level) for multiple clients to read

support reading options from file
 - and registry
    - command line overrides all, specified file overrides registry
 - display where option came from
 - node running as service stores settings in HKLM
    - connected app will need elevation of the "node setup dialog" (separate app)
 - node started by tray app or reader app will normally use HKCU 
    - but if local config file (sqlite?) is present (raddi32.cfg) then will use that

tables: test and fix shard splitting
tables: add code for client app to process external changes, see 'process' member function
tables: evaluate proper size limits so the index files fit exactly within whole multiples of a typical cluster size

perfect compression dictionary for english text
 - https://sourceforge.net/p/lzmautils/discussion/708858/thread/e40fbf99/
 - 1) open reddit export and extract body string
   2) replace unicode (\u1234) and escapes (\n or \") with actual unicode/control characters
   3) split to words (keep apostrophed words like can't or can\u2019t)
   4) for 'en' dictitonary drop words with unicode characters in it except \u2019 (maybe other?)
   5) compute freqency of words -> value
   6) reduce: remove words found in other words (affect value: avg, sum or max?)
   7) clamp: delete low values words, keep only reasonable amount of high-value words
   Z) combine: to one long string, asc sorting by value, with removing words found inside the newly combined string
 - evaluate gains of shuffling various similarly-valued words in order to 
 - compress initial bodies with established dictionary, report results, try different dictionaries, compare results

title/sidebar edits must be retained forever and forwarded to all users
 - or just require moderators to occassionally update them with fresh non-edit entry?

historical data replay flooding protection in raddi::db::classify case
 - start rejecting old entries from connection that we did not asked (connection->history_extension)

app: master phrase/password to protect keys + misdirection phrase/password for plausible deniability unlocks different set of account
 - generates safety hash such as
    - pwd1 + hash -> main key
    - pwd2 + hash -> safety key

app: https://github.com/Microsoft/console/issues/277
 - SetWindowTheme(hWnd, L"DarkMode_Explorer", nullptr);
 - AllowDarkModeForWindow
 - https://github.com/ysc3839/VCMPBrowser/blob/darkmode/DarkMode.h

sane coordinator status display
more info into overview

move connection::request_limiter to separate class

connection members will probably need locking to protect from early deletion when retired

old data deletion (whole shards?) except 'retained' channels/threads

Windows tray app (optional) to monitor Node service

coordinator: congestion control
coordinator: small random delay to sends to harden agains origin analysis -> connection.send
connection::send -> prioritization and delay support
coordinator: support for 'flags' 0x0001 (detail request) in channel/identites history and subscriptions history

merge raddi::detached, raddi::noticed and raddi::subscriptions
 - maybe one base template with 3 specializations

split raddi stuff from node.cpp to raddi_node.cpp
 - rename node.cpp to node_win.cpp and keep all Win32/service stuff there

shell32.dll - SHGetFolderPath (use install path as default for db/log???)
user32.dll - LoadStringW
ole32.dll - StringFromGUID2
 - rewrite those functions because those DLLs load GDI32.dll into raddi##.exe service
   (more secure, less resources)

rewrite log as noted in log.cpp or somewhere there in comment

SETTINGS GUIDE: settings for most privacy concerned users, first run (proxy, tor, listeners, xor-mask)
SETTINGS GUIDE: running multiple nodes on single machine

TBD hta: http://localhost:44304/abcd/ executable name??? local web serving tray app, access through http/browser
TBD app: https://msdn.microsoft.com/en-us/library/aa767914(VS.85).aspx#app_reg
TBD ext: raddi://a29e7568b5da6a-b5e418[.txt/.html/.xml/.md]
TBD ext: raddi://a29e7568b5da6a-b5e418/[1/2/3/...][.jpg/.png/.zip/...]
TBD www - read-only web interface: http://read.raddi.net:8008/... (or 591)

common/string.h
 - string with platform-defined internal representation
   (UTF-16 on Windows, UTF-8 on Linux), auto converting
 - use for paths and everything
    - options?
    - for comparisons use TEXT macro, define platform-specific for non-_WIN32
    - node.cpp/raddi.com.cpp -> main args?
 - AND THEN DROP ALL wchar_t* OVERLOADS

consider http server? simple GET/POST support
 - also replace Source/commands functionality
 - POST - new identity/channel/post/etc.
 - GET - db queries? lists of identities/channels
       - deep tree data fetch?
       - get node status (for status button/iframe on website)

document protocol
 - requirement: synchronized time
